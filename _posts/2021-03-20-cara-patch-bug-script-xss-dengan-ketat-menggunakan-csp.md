---
id: 204
title: 'Cara Patch Bug Script (XSS) Dengan Ketat Menggunakan (CSP)'
date: '2021-03-20T04:25:00+00:00'
author: admin
layout: post
guid: 'http://localhost/wordpress/index.php/2021/03/20/cara-patch-bug-script-xss-dengan-ketat-menggunakan-csp/'
permalink: /index.php/2021/03/20/cara-patch-bug-script-xss-dengan-ketat-menggunakan-csp/
blogger_blog:
    - webidevloper.blogspot.com
blogger_author:
    - IDEV.My.ID
blogger_permalink:
    - /2021/03/cara-patch-bug-script-xss-dengan-ketat.html
blogger_internal:
    - /feeds/2636143461486592706/posts/default/172284115644752240
categories:
    - CyberSecurityTutorial
---

<div style="clear: both; text-align: center;">[![cara patch bug script xss menggunakan csp](https://1.bp.blogspot.com/-Cy9Ia0LOp0M/YFSprjR6z7I/AAAAAAAAAdw/bPUdnTf0CF4WyX6mgGHRSXB8gbhaZdV7QCLcBGAsYHQ/w640-h452/IMG_20210319_203925.JPG "Cara Patch Bug Script (XSS) Dengan Ketat Menggunakan (CSP)")](https://1.bp.blogspot.com/-Cy9Ia0LOp0M/YFSprjR6z7I/AAAAAAAAAdw/bPUdnTf0CF4WyX6mgGHRSXB8gbhaZdV7QCLcBGAsYHQ/s706/IMG_20210319_203925.JPG)</div><span style="font-family: Segoe UI, system-ui, -apple-system, sans-serif;"><span style="font-size: 18px;">Cara menerapkan CSP berdasarkan nonce skrip atau hash sebagai pertahanan mendalam terhadap skrip lintas situs.</span></span>

<span style="font-family: Segoe UI, system-ui, -apple-system, sans-serif;"><span style="font-size: 18px;">Mengapa anda harus menerapkan Kebijakan Kemanan Konten (CSP) yang ketat?</span></span>

<span style="font-family: Segoe UI, system-ui, -apple-system, sans-serif; font-size: medium;">Skrip lintas situs (XSS) —kemampuan untuk memasukkan skrip berbahaya ke dalam aplikasi web — telah menjadi salah satu kerentanan keamanan web terbesar selama lebih dari satu dekade.</span>

<span style="box-sizing: border-box; vertical-align: inherit;"><span style="box-sizing: border-box; vertical-align: inherit;">Kebijakan Keamanan Konten (CSP)</span></span><span style="box-sizing: border-box; vertical-align: inherit;"><span style="box-sizing: border-box; vertical-align: inherit;"> adalah lapisan keamanan tambahan yang membantu mengurangi XSS. </span><span style="box-sizing: border-box; vertical-align: inherit;">Mengonfigurasi CSP melibatkan penambahan header HTTP Kebijakan Keamanan Konten ke halaman web dan nilai pengaturan untuk mengontrol sumber daya apa yang diizinkan untuk memuat agen pengguna untuk halaman itu. </span><span style="box-sizing: border-box; vertical-align: inherit;">Artikel ini menjelaskan cara menggunakan CSP berdasarkan nonce atau hashes untuk mengurangi XSS, bukan CSP berbasis host-allowlist yang umum digunakan, yang sering kali membuat halaman terbuka ke XSS karena dapat </span></span><span style="box-sizing: border-box; vertical-align: inherit;"><span style="box-sizing: border-box; vertical-align: inherit;">dilewati di sebagian besar konfigurasi</span></span><span style="box-sizing: border-box; vertical-align: inherit;"><span style="box-sizing: border-box; vertical-align: inherit;"> .</span></span>

<div style="box-sizing: border-box; font-family: "Segoe UI", system-ui, -apple-system, sans-serif; font-size: 18px; line-height: 32px; margin: 48px 0px 32px; padding: 24px 0px 0px 48px; position: relative;"><span color="inherit" style="box-sizing: border-box; font-weight: 700;"><span style="box-sizing: border-box; vertical-align: inherit;"></span></span><span style="vertical-align: inherit;"><span color="rgba(0, 0, 0, 0)" style="box-sizing: border-box; vertical-align: inherit;"></span></span>  
<span style="background-color: white; color: #444444;"><span style="box-sizing: border-box; vertical-align: inherit;"><span style="box-sizing: border-box; vertical-align: inherit;">Kata </span><span style="box-sizing: border-box; font-weight: 700;"><span style="box-sizing: border-box; vertical-align: inherit;">Kunci</span></span><span style="box-sizing: border-box; vertical-align: inherit;"> : </span></span>*<span style="box-sizing: border-box; vertical-align: inherit;"><span style="box-sizing: border-box; vertical-align: inherit;">Nonce</span></span>*<span style="box-sizing: border-box; vertical-align: inherit;"><span style="box-sizing: border-box; vertical-align: inherit;"> adalah nomor acak yang hanya digunakan sekali yang dapat digunakan untuk menandai </span></span>`<script>`<span style="box-sizing: border-box; vertical-align: inherit;"><span style="box-sizing: border-box; vertical-align: inherit;">tag sebagai tepercaya.</span></span></span>

</div><div style="box-sizing: border-box; font-family: "Segoe UI", system-ui, -apple-system, sans-serif; font-size: 18px; line-height: 32px; margin: 48px 0px 32px; padding: 24px 0px 0px 48px; position: relative;"><span style="background-color: white; color: #444444;"><span style="box-sizing: border-box; font-weight: 700;"><span style="box-sizing: border-box; vertical-align: inherit;"><span style="box-sizing: border-box; vertical-align: inherit;">Istilah Kunci</span></span></span><span style="box-sizing: border-box; vertical-align: inherit;"><span style="box-sizing: border-box; vertical-align: inherit;"> :</span></span>  
<span style="box-sizing: border-box; vertical-align: inherit;"><span style="box-sizing: border-box; vertical-align: inherit;">Fungsi hash adalah fungsi matematika yang mengubah nilai input menjadi nilai numerik terkompresi — hash. </span><span style="box-sizing: border-box; vertical-align: inherit;">Sebuah </span></span>*<span style="box-sizing: border-box; vertical-align: inherit;"><span style="box-sizing: border-box; vertical-align: inherit;">hash</span></span>*<span style="box-sizing: border-box; vertical-align: inherit;"><span style="box-sizing: border-box; vertical-align: inherit;"> (seperti </span></span>[<span style="box-sizing: border-box; vertical-align: inherit;"><span style="box-sizing: border-box; vertical-align: inherit;">SHA-256</span></span>](https://en.wikipedia.org/wiki/SHA-2)<span style="box-sizing: border-box; vertical-align: inherit;"><span style="box-sizing: border-box; vertical-align: inherit;"> ) dapat digunakan untuk menandai inline </span></span>`<script>`<span style="box-sizing: border-box; vertical-align: inherit;"><span style="box-sizing: border-box; vertical-align: inherit;">tag sebagai terpercaya.</span></span></span>

</div><span style="box-sizing: border-box; vertical-align: inherit;"><span style="box-sizing: border-box; vertical-align: inherit;">Kebijakan Keamanan Konten berdasarkan nonce atau hashes sering disebut </span></span>*<span style="box-sizing: border-box; vertical-align: inherit;"><span style="box-sizing: border-box; vertical-align: inherit;">CSP ketat</span></span>*<span style="box-sizing: border-box; vertical-align: inherit;"><span style="box-sizing: border-box; vertical-align: inherit;"> . </span><span style="box-sizing: border-box; vertical-align: inherit;">Saat aplikasi menggunakan CSP yang ketat, penyerang yang menemukan kelemahan injeksi HTML umumnya tidak akan dapat menggunakannya untuk memaksa browser menjalankan skrip berbahaya dalam konteks dokumen yang rentan. </span><span style="box-sizing: border-box; vertical-align: inherit;">Ini karena CSP yang ketat hanya mengizinkan skrip atau skrip yang di-hash dengan nilai nonce yang benar yang dibuat di server, sehingga penyerang tidak dapat mengeksekusi skrip tanpa mengetahui nonce yang benar untuk respons yang diberikan.</span></span>

<div style="box-sizing: border-box; font-family: "Segoe UI", system-ui, -apple-system, sans-serif; font-size: 18px; line-height: 32px; margin: 48px 0px 32px; padding: 24px 0px 0px 48px; position: relative;"><span style="color: #444444;"><span style="box-sizing: border-box; vertical-align: inherit;"><span style="box-sizing: border-box; vertical-align: inherit;">Untuk melindungi situs Anda dari XSS, pastikan untuk membersihkan masukan pengguna </span></span>*<span style="box-sizing: border-box; vertical-align: inherit;"><span style="box-sizing: border-box; vertical-align: inherit;">dan</span></span>*<span style="box-sizing: border-box; vertical-align: inherit;"><span style="box-sizing: border-box; vertical-align: inherit;"> menggunakan CSP sebagai lapisan keamanan ekstra. </span><span style="box-sizing: border-box; vertical-align: inherit;">CSP adalah </span><span style="box-sizing: border-box; vertical-align: inherit;">teknik </span></span>[<span style="box-sizing: border-box; vertical-align: inherit;"><span style="box-sizing: border-box; vertical-align: inherit;">pertahanan mendalam</span></span>](https://en.wikipedia.org/wiki/Defense_in_depth_(computing))<span style="box-sizing: border-box; vertical-align: inherit;"><span style="box-sizing: border-box; vertical-align: inherit;"> yang dapat mencegah eksekusi skrip berbahaya, tetapi ini bukan pengganti untuk menghindari (dan segera memperbaiki) bug XSS.</span></span></span>

</div>### <span style="box-sizing: border-box; vertical-align: inherit;"><span style="box-sizing: border-box; vertical-align: inherit;">Mengapa CSP ketat direkomendasikan daripada CSP yang diizinkan</span></span>

<span style="box-sizing: border-box; vertical-align: inherit;"><span style="box-sizing: border-box; vertical-align: inherit;">Jika situs Anda sudah memiliki CSP yang terlihat seperti ini </span></span>`script-src www.googleapis.com`<span style="box-sizing: border-box; vertical-align: inherit;"><span style="box-sizing: border-box; vertical-align: inherit;">:, mungkin tidak efektif melawan skrip lintas situs! </span><span style="box-sizing: border-box; vertical-align: inherit;">Jenis CSP ini disebut CSP allowlist dan memiliki beberapa kelemahan:</span></span>

- <span style="box-sizing: border-box; vertical-align: inherit;"><span style="box-sizing: border-box; vertical-align: inherit;">Ini membutuhkan banyak penyesuaian.</span></span>
- <span style="box-sizing: border-box; vertical-align: inherit;"><span style="box-sizing: border-box; vertical-align: inherit;">Ini dapat </span></span><span style="box-sizing: border-box; vertical-align: inherit;"><span style="box-sizing: border-box; vertical-align: inherit;">dilewati di sebagian besar konfigurasi</span></span><span style="box-sizing: border-box; vertical-align: inherit;"><span style="box-sizing: border-box; vertical-align: inherit;"> .</span></span>

<span style="box-sizing: border-box; vertical-align: inherit;"><span style="box-sizing: border-box; vertical-align: inherit;">Hal ini membuat CSP allowlist umumnya tidak efektif dalam mencegah penyerang mengeksploitasi XSS. </span><span style="box-sizing: border-box; vertical-align: inherit;">Itulah mengapa disarankan untuk menggunakan CSP yang ketat berdasarkan nonce atau hash kriptografi, yang menghindari perangkap yang diuraikan di atas.</span></span>

<div style="box-sizing: border-box; display: grid; font-family: "Segoe UI", system-ui, -apple-system, sans-serif; font-size: 16px; gap: 1rem; grid-template-columns: repeat(auto-fit, minmax(25ch, 1fr)); margin: 0px; padding: 0px;"><figure style="box-sizing: border-box; line-height: 1.5em; margin: 0px; padding: 0px 0px 0px 16px; position: relative;"><span style="box-sizing: border-box; vertical-align: inherit;">Allowlist CSP</span>

- <span style="box-sizing: border-box; vertical-align: inherit;"><span style="box-sizing: border-box; vertical-align: inherit;">Tidak melindungi situs Anda secara efektif. </span><span style="box-sizing: border-box; vertical-align: inherit;">❌</span></span>
- <span style="box-sizing: border-box; vertical-align: inherit;"><span style="box-sizing: border-box; vertical-align: inherit;">Harus sangat disesuaikan. </span><span style="box-sizing: border-box; vertical-align: inherit;">😓</span></span>

</figure><figure style="box-sizing: border-box; line-height: 1.5em; margin: 0px; padding: 0px 0px 0px 16px; position: relative;"><span style="box-sizing: border-box; vertical-align: inherit;">CSP yang ketat</span>

- <span style="box-sizing: border-box; vertical-align: inherit;"><span style="box-sizing: border-box; vertical-align: inherit;">Secara efektif melindungi situs Anda. </span><span style="box-sizing: border-box; vertical-align: inherit;">✅</span></span>
- <span style="box-sizing: border-box; vertical-align: inherit;"><span style="box-sizing: border-box; vertical-align: inherit;">Selalu memiliki struktur yang sama. </span><span style="box-sizing: border-box; vertical-align: inherit;">😌</span></span>

</figure></div>## <span style="box-sizing: border-box; vertical-align: inherit;"><span style="box-sizing: border-box; vertical-align: inherit;">Apa itu Kebijakan Keamanan Konten yang ketat?</span></span>

<span style="box-sizing: border-box; vertical-align: inherit;"><span style="box-sizing: border-box; vertical-align: inherit;">Kebijakan Keamanan Konten yang ketat memiliki struktur berikut dan diaktifkan dengan menyetel salah satu dari tajuk tanggapan HTTP berikut:</span></span>

- <span style="box-sizing: border-box;"><span style="box-sizing: border-box; vertical-align: inherit;"><span style="box-sizing: border-box; vertical-align: inherit;">CSP ketat berbasis nonce</span></span></span>
- <span style="box-sizing: border-box;"><span style="box-sizing: border-box; vertical-align: inherit;"><span style="box-sizing: border-box; vertical-align: inherit;">  
    </span></span></span>

> <span face="SFMono-Regular, Consolas, "Liberation Mono", Menlo, monospace" style="color: #202124; font-size: 1em; word-spacing: normal;">Content-Security-Policy:  
> </span><span face="SFMono-Regular, Consolas, "Liberation Mono", Menlo, monospace" style="color: #202124; font-size: 1em; word-spacing: normal;"> script-src ‘nonce-{RANDOM}’ ‘strict-dynamic’;  
> </span><span face="SFMono-Regular, Consolas, "Liberation Mono", Menlo, monospace" style="color: #202124; font-size: 1em; word-spacing: normal;"> object-src ‘none’;  
> </span><span face="SFMono-Regular, Consolas, "Liberation Mono", Menlo, monospace" style="background-color: #f7f7f7; color: #202124; font-size: 16px; word-spacing: normal;"> </span><span face="SFMono-Regular, Consolas, "Liberation Mono", Menlo, monospace" style="background-color: #f7f7f7; color: #202124; font-size: 16px; word-spacing: normal;">base-uri ‘none’;</span>

<div><web-copy-code style="box-sizing: border-box; display: block; font-family: "Segoe UI", system-ui, -apple-system, sans-serif; font-size: 16px; position: relative;"><button aria-label="Salin kode" style="-webkit-font-smoothing: antialiased; -webkit-tap-highlight-color: transparent; align-items: center; background-attachment: initial; background-clip: initial; background-image: initial; background-origin: initial; background-position: 0px 0px; background-repeat: initial; background-size: initial; border-color: initial; border-radius: 50%; border-style: initial; border-width: 0px; color: #202124; cursor: pointer; display: inline-flex; font-family: "Segoe UI", system-ui, -apple-system, sans-serif; font-size: 0.875rem; height: 48px; justify-content: center; letter-spacing: 1px; line-height: 2.25rem; margin: 8px; opacity: 0; outline: 0px; overflow: unset; padding: 0px; position: absolute; right: 0px; text-rendering: optimizespeed; text-transform: uppercase; transition: background 0.2s ease 0s, color 0.2s ease 0s; width: 48px;"><span role="tooltip" style="background: rgb(0, 0, 0); border-radius: 3px; box-sizing: border-box; color: white; font-size: 12px; font-stretch: normal; font-variant-east-asian: normal; font-variant-numeric: normal; left: 48px; letter-spacing: 0.3px; line-height: 1; opacity: 0; padding: 6px 8px; pointer-events: none; position: absolute; text-transform: none; top: calc(100% + 3px); transform-origin: right top; transform: translateX(-100%) scale(0.85); transition: opacity 75ms ease 0s, transform 0s ease 75ms, visibility 0s ease 75ms; visibility: hidden; white-space: nowrap; z-index: 1;"><span style="box-sizing: border-box; vertical-align: inherit;"><span style="box-sizing: border-box; vertical-align: inherit;"></span></span></span></button></web-copy-code>![cara patch bug script xss menggunakan csp](https://web-dev.imgix.net/image/vgdbNJBYHma2o62ZqYmcnkq3j0o1/er4BaGCJzBwDaESFKfZd.jpg?auto=format "Cara Patch Bug Script (XSS) Dengan Ketat Menggunakan (CSP)")- <span style="box-sizing: border-box;"><span style="box-sizing: border-box; vertical-align: inherit;"><span style="box-sizing: border-box; vertical-align: inherit;">CSP ketat berbasis hash</span></span></span>

</div>> <div><span face="SFMono-Regular, Consolas, "Liberation Mono", Menlo, monospace" style="color: #202124; font-size: 1em; word-spacing: normal;">Content-Security-Policy:</span></div><div><span face="SFMono-Regular, Consolas, "Liberation Mono", Menlo, monospace" style="color: #202124; font-size: 1em; word-spacing: normal;"> script-src ‘sha256-{HASHED\_INLINE\_SCRIPT}’ ‘strict-dynamic’;</span></div><div><span face="SFMono-Regular, Consolas, "Liberation Mono", Menlo, monospace" style="color: #202124; font-size: 1em; word-spacing: normal;"> object-src ‘none’; </span></div><div><div><span face="SFMono-Regular, Consolas, "Liberation Mono", Menlo, monospace" style="color: #202124; font-size: 1em; word-spacing: normal;">base-uri ‘none’;</span> </div></div>

> <div><div> </div></div>

> <div><div><span style="box-sizing: border-box; color: #444444; font-family: inherit; vertical-align: inherit;">Ini adalah versi CSP ketat yang paling dilucuti. </span><span style="box-sizing: border-box; color: #444444; font-family: inherit; vertical-align: inherit;">Anda harus menyesuaikannya agar efektif di seluruh browser.</span></div></div>

<div><span style="box-sizing: border-box; vertical-align: inherit;"><span style="box-sizing: border-box; vertical-align: inherit;">Properti berikut membuat CSP seperti di atas “ketat” dan karenanya aman:</span></span>

- <span style="box-sizing: border-box; vertical-align: inherit;"><span style="box-sizing: border-box; vertical-align: inherit;">Menggunakan nonce </span></span>`'nonce-{RANDOM}'`<span style="box-sizing: border-box; vertical-align: inherit;"><span style="box-sizing: border-box; vertical-align: inherit;">atau hashes </span></span>`'sha256-{HASHED_INLINE_SCRIPT}'`<span style="box-sizing: border-box; vertical-align: inherit;"><span style="box-sizing: border-box; vertical-align: inherit;">untuk menunjukkan </span></span>`<script>`<span style="box-sizing: border-box; vertical-align: inherit;"><span style="box-sizing: border-box; vertical-align: inherit;">tag </span><span style="box-sizing: border-box; vertical-align: inherit;">mana </span><span style="box-sizing: border-box; vertical-align: inherit;">yang dipercaya oleh pengembang situs dan harus diizinkan untuk dijalankan di browser pengguna.</span></span>
- <span style="box-sizing: border-box; vertical-align: inherit;"><span style="box-sizing: border-box; vertical-align: inherit;">Menyetel </span></span>[`'strict-dynamic'`](https://www.w3.org/TR/CSP3/#strict-dynamic-usage)<span style="box-sizing: border-box; vertical-align: inherit;"><span style="box-sizing: border-box; vertical-align: inherit;">untuk mengurangi upaya penerapan CSP berbasis nonce atau hash dengan secara otomatis mengizinkan eksekusi skrip yang dibuat oleh skrip yang sudah tepercaya. </span><span style="box-sizing: border-box; vertical-align: inherit;">Ini juga membuka blokir penggunaan sebagian besar pustaka dan widget JavaScript pihak ketiga.</span></span>
- <span style="box-sizing: border-box; vertical-align: inherit;"><span style="box-sizing: border-box; vertical-align: inherit;">Tidak berdasarkan pada daftar yang diizinkan URL dan oleh karena itu tidak mengalami pengabaian </span></span><span style="box-sizing: border-box; vertical-align: inherit;"><span style="box-sizing: border-box; vertical-align: inherit;">CSP yang umum</span></span><span style="box-sizing: border-box; vertical-align: inherit;"><span style="box-sizing: border-box; vertical-align: inherit;"> .</span></span>
- <span style="box-sizing: border-box; vertical-align: inherit;"><span style="box-sizing: border-box; vertical-align: inherit;">Memblokir skrip inline yang tidak tepercaya seperti inline event handler atau </span></span>`javascript:`<span style="box-sizing: border-box; vertical-align: inherit;"><span style="box-sizing: border-box; vertical-align: inherit;">URI.</span></span>
- <span style="box-sizing: border-box; vertical-align: inherit;"><span style="box-sizing: border-box; vertical-align: inherit;">Membatasi </span></span>`object-src`<span style="box-sizing: border-box; vertical-align: inherit;"><span style="box-sizing: border-box; vertical-align: inherit;">untuk menonaktifkan plugin berbahaya seperti Flash.</span></span>
- <span style="box-sizing: border-box; vertical-align: inherit;"><span style="box-sizing: border-box; vertical-align: inherit;">Membatasi </span></span>`base-uri`<span style="box-sizing: border-box; vertical-align: inherit;"><span style="box-sizing: border-box; vertical-align: inherit;">untuk memblokir injeksi </span></span>`<base>`<span style="box-sizing: border-box; vertical-align: inherit;"><span style="box-sizing: border-box; vertical-align: inherit;">tag. </span><span style="box-sizing: border-box; vertical-align: inherit;">Ini mencegah penyerang mengubah lokasi skrip yang dimuat dari URL relatif.</span></span>

<div style="box-sizing: border-box; font-family: "Segoe UI", system-ui, -apple-system, sans-serif; font-size: 18px; line-height: 32px; margin: 48px 0px 32px; padding: 24px 0px 0px 48px; position: relative;"><span style="box-sizing: border-box; vertical-align: inherit;"><span style="background-color: white; box-sizing: border-box; color: #444444; vertical-align: inherit;">Keuntungan lain dari CSP yang ketat adalah CSP selalu memiliki struktur yang sama dan tidak perlu disesuaikan untuk aplikasi Anda.</span></span>

</div>## <span style="box-sizing: border-box; vertical-align: inherit;"><span style="box-sizing: border-box; vertical-align: inherit;">Mengadopsi CSP yang ketat</span></span>

<span style="box-sizing: border-box; vertical-align: inherit;"><span style="box-sizing: border-box; vertical-align: inherit;">Untuk mengadopsi CSP yang ketat, Anda perlu:</span></span>

1. <span style="box-sizing: border-box; vertical-align: inherit;"><span style="box-sizing: border-box; vertical-align: inherit;">Putuskan apakah aplikasi Anda harus menyetel CSP berbasis nonce atau hash.</span></span>
2. <span style="box-sizing: border-box; vertical-align: inherit;"><span style="box-sizing: border-box; vertical-align: inherit;">Salin CSP dari bagian </span></span><span style="box-sizing: border-box; vertical-align: inherit;"><span style="box-sizing: border-box; vertical-align: inherit;">Apa itu Kebijakan Keamanan Konten yang ketat</span></span><span style="box-sizing: border-box; vertical-align: inherit;"><span style="box-sizing: border-box; vertical-align: inherit;"> dan setel sebagai header respons di seluruh aplikasi Anda.</span></span>
3. <span style="box-sizing: border-box; vertical-align: inherit;"><span style="box-sizing: border-box; vertical-align: inherit;">Template HTML Refactor dan kode sisi klien untuk menghapus pola yang tidak kompatibel dengan CSP.</span></span>
4. <span style="box-sizing: border-box; vertical-align: inherit;"><span style="box-sizing: border-box; vertical-align: inherit;">Tambahkan fallback untuk mendukung Safari dan browser lama.</span></span>
5. <span style="box-sizing: border-box; vertical-align: inherit;"><span style="box-sizing: border-box; vertical-align: inherit;">Terapkan CSP Anda.</span></span>

<span style="box-sizing: border-box; vertical-align: inherit;"><span style="box-sizing: border-box; vertical-align: inherit;">Anda dapat menggunakan </span><span style="box-sizing: border-box; vertical-align: inherit;">audit </span><span style="box-sizing: border-box;"><span style="box-sizing: border-box; vertical-align: inherit;">Praktik Terbaik </span></span></span>[<span style="box-sizing: border-box; vertical-align: inherit;"><span style="box-sizing: border-box; vertical-align: inherit;">Lighthouse</span></span>](https://developers.google.com/web/tools/lighthouse)<span style="box-sizing: border-box; vertical-align: inherit;"><span style="box-sizing: border-box; vertical-align: inherit;"> (v7.3.0 dan yang lebih baru) </span><span style="box-sizing: border-box; vertical-align: inherit;">selama proses ini untuk memeriksa apakah situs Anda memiliki CSP, dan apakah cukup ketat untuk menjadi efektif terhadap XSS.</span></span><span style="box-sizing: border-box;"><span style="box-sizing: border-box; vertical-align: inherit;"></span></span><span style="box-sizing: border-box; vertical-align: inherit;"></span>

![Laporan Lighthouse memperingatkan bahwa tidak ada CSP yang ditemukan dalam mode penegakan - idev.my.id](https://web-dev.imgix.net/image/vgdbNJBYHma2o62ZqYmcnkq3j0o1/DAt65SsdOKxEHmtNFEKX.png?auto=format)

### <span style="box-sizing: border-box; vertical-align: inherit;"><span style="box-sizing: border-box; vertical-align: inherit;">Langkah 1<span style="font-weight: 500;">: Putuskan apakah Anda memerlukan CSP berbasis nonce atau hash</span></span></span>

<span style="box-sizing: border-box; vertical-align: inherit;"><span style="box-sizing: border-box; vertical-align: inherit;">Ada dua jenis CSP yang ketat, nonce- dan berbasis hash. </span><span style="box-sizing: border-box; vertical-align: inherit;">Begini cara kerjanya:</span></span>

- <span style="box-sizing: border-box;"><span style="box-sizing: border-box; vertical-align: inherit;"><span style="box-sizing: border-box; vertical-align: inherit;">CSP berbasis nonce</span></span></span><span style="box-sizing: border-box; vertical-align: inherit;"><span style="box-sizing: border-box; vertical-align: inherit;"> : Anda membuat nomor acak </span></span>*<span style="box-sizing: border-box; vertical-align: inherit;"><span style="box-sizing: border-box; vertical-align: inherit;">pada waktu proses</span></span>*<span style="box-sizing: border-box; vertical-align: inherit;"><span style="box-sizing: border-box; vertical-align: inherit;"> , memasukkannya ke dalam CSP, dan mengaitkannya dengan setiap tag skrip di halaman Anda. </span><span style="box-sizing: border-box; vertical-align: inherit;">Penyerang tidak dapat menyertakan dan menjalankan skrip berbahaya di halaman Anda, karena mereka perlu menebak nomor acak yang benar untuk skrip tersebut. </span><span style="box-sizing: border-box; vertical-align: inherit;">Ini hanya berfungsi jika nomor tersebut tidak dapat ditebak dan baru dibuat saat runtime untuk setiap respons.</span></span>
- <span style="box-sizing: border-box;"><span style="box-sizing: border-box; vertical-align: inherit;"><span style="box-sizing: border-box; vertical-align: inherit;">CSP berbasis</span></span></span><span style="box-sizing: border-box; vertical-align: inherit;"><span style="box-sizing: border-box; vertical-align: inherit;"> hash: Hash dari setiap tag skrip sebaris ditambahkan ke CSP. </span><span style="box-sizing: border-box; vertical-align: inherit;">Perhatikan bahwa setiap skrip memiliki hash yang berbeda. </span><span style="box-sizing: border-box; vertical-align: inherit;">Penyerang tidak dapat menyertakan dan menjalankan skrip berbahaya di halaman Anda, karena hash skrip tersebut harus ada di CSP Anda.</span></span>

<span style="box-sizing: border-box; vertical-align: inherit;"><span style="box-sizing: border-box; vertical-align: inherit;">Kriteria untuk memilih pendekatan CSP yang ketat:</span></span>

<div style="background-attachment: local, local, scroll, scroll; background-color: white; background-image: linear-gradient(to right, rgb(255, 255, 255) 30%, rgba(255, 255, 255, 0)), linear-gradient(to right, rgba(255, 255, 255, 0), rgb(255, 255, 255) 70%), radial-gradient(farthest-side at 0px 50%, rgba(0, 0, 0, 0.2), transparent), radial-gradient(farthest-side at 100% 50%, rgba(0, 0, 0, 0.2), transparent); background-position: 0px 0px, 100% 50%, 0px 0px, 100% 50%; background-size: 40px 100%, 40px 100%, 14px 100%, 14px 100%; background: linear-gradient(to right, rgb(255, 255, 255) 30%, rgba(255, 255, 255, 0)) 0px 0px / 40px 100% no-repeat local, linear-gradient(to right, rgba(255, 255, 255, 0), rgb(255, 255, 255) 70%) 100% center / 40px 100% local, radial-gradient(farthest-side at 0px 50%, rgba(0, 0, 0, 0.2), transparent) 0px 0px / 14px 100% scroll, radial-gradient(farthest-side at 100% 50%, rgba(0, 0, 0, 0.2), transparent) 100% center / 14px 100% scroll rgb(255, 255, 255); box-sizing: border-box; font-family: "Segoe UI", system-ui, -apple-system, sans-serif; font-size: 16px; margin: 32px 0px; overflow: auto; padding: 0px;"><span style="box-sizing: border-box; vertical-align: inherit;"><span style="box-sizing: border-box; vertical-align: inherit;">Kriteria untuk memilih pendekatan CSP yang ketat</span></span>
| <span style="box-sizing: border-box; vertical-align: inherit;"><span style="box-sizing: border-box; vertical-align: inherit;">CSP berbasis nonce</span></span> | <span style="box-sizing: border-box; vertical-align: inherit;"><span style="box-sizing: border-box; vertical-align: inherit;">Untuk halaman HTML yang dirender di server tempat Anda dapat membuat token acak baru (nonce) untuk setiap respons.</span></span> |
|---|---|
| <span style="box-sizing: border-box; vertical-align: inherit;"><span style="box-sizing: border-box; vertical-align: inherit;">CSP berbasis hash</span></span> | <span style="box-sizing: border-box; vertical-align: inherit;"><span style="box-sizing: border-box; vertical-align: inherit;">Untuk halaman HTML disajikan secara statis atau yang perlu di-cache. </span><span style="box-sizing: border-box; vertical-align: inherit;">Misalnya, aplikasi web satu halaman yang dibuat dengan kerangka kerja seperti Angular, React, atau lainnya, yang disajikan secara statis tanpa rendering sisi server.</span></span> |

</div>### <span style="box-sizing: border-box; vertical-align: inherit;"><span style="box-sizing: border-box; vertical-align: inherit;"><span style="background-color: white;">Langkah</span> 2:<span style="font-weight: 500;"> Tetapkan CSP yang ketat dan siapkan skrip Anda</span></span></span>

<span style="box-sizing: border-box; vertical-align: inherit;"><span style="box-sizing: border-box; vertical-align: inherit;">Saat mengatur CSP, Anda memiliki beberapa opsi:</span></span>

- <span style="box-sizing: border-box; vertical-align: inherit;"><span style="box-sizing: border-box; vertical-align: inherit;">Mode hanya laporan ( </span></span>`Content-Security-Policy-Report-Only`<span style="box-sizing: border-box; vertical-align: inherit;"><span style="box-sizing: border-box; vertical-align: inherit;">) atau mode penerapan ( </span></span>`Content-Security-Policy`<span style="box-sizing: border-box; vertical-align: inherit;"><span style="box-sizing: border-box; vertical-align: inherit;">). </span><span style="box-sizing: border-box; vertical-align: inherit;">Dalam hanya laporan, CSP belum akan memblokir sumber daya — tidak ada yang akan rusak — tetapi Anda akan dapat melihat kesalahan dan menerima laporan tentang apa yang akan diblokir. </span><span style="box-sizing: border-box; vertical-align: inherit;">Secara lokal, saat Anda sedang dalam proses menyetel CSP, ini tidak terlalu penting, karena kedua mode akan menampilkan kesalahan di konsol browser. </span><span style="box-sizing: border-box; vertical-align: inherit;">Jika ada, mode penegakan akan mempermudah Anda untuk melihat sumber daya yang diblokir dan mengubah CSP Anda, karena halaman Anda akan terlihat rusak. </span><span style="box-sizing: border-box; vertical-align: inherit;">Mode hanya laporan menjadi paling berguna nanti dalam proses (lihat </span></span><span style="box-sizing: border-box; vertical-align: inherit;"><span style="box-sizing: border-box; vertical-align: inherit;">Langkah 5</span></span><span style="box-sizing: border-box; vertical-align: inherit;"><span style="box-sizing: border-box; vertical-align: inherit;"> ).</span></span>
- <span style="box-sizing: border-box; vertical-align: inherit;"><span style="box-sizing: border-box; vertical-align: inherit;">Header atau </span></span>`<meta>`<span style="box-sizing: border-box; vertical-align: inherit;"><span style="box-sizing: border-box; vertical-align: inherit;">tag </span><span style="box-sizing: border-box; vertical-align: inherit;">HTML </span><span style="box-sizing: border-box; vertical-align: inherit;">. </span><span style="box-sizing: border-box; vertical-align: inherit;">Untuk pengembangan lokal, </span></span>`<meta>`<span style="box-sizing: border-box; vertical-align: inherit;"><span style="box-sizing: border-box; vertical-align: inherit;">tag mungkin lebih nyaman untuk menyesuaikan CSP Anda dan dengan cepat melihat bagaimana pengaruhnya terhadap situs Anda. </span><span style="box-sizing: border-box; vertical-align: inherit;">Namun:</span></span>
- <span style="box-sizing: border-box; vertical-align: inherit;"><span style="box-sizing: border-box; vertical-align: inherit;">Nanti, saat menerapkan CSP Anda dalam produksi, disarankan untuk menyetelnya sebagai header HTTP.</span></span>
- <span style="box-sizing: border-box; vertical-align: inherit;"><span style="box-sizing: border-box; vertical-align: inherit;">Jika Anda ingin menyetel CSP dalam mode hanya laporan, Anda harus menyetelnya sebagai tajuk — tag meta CSP tidak mendukung mode hanya laporan.</span></span>


<div>### <span style="box-sizing: border-box; vertical-align: inherit;"><span style="box-sizing: border-box; vertical-align: inherit;">Langkah 3<span style="font-weight: 500;">: Refactor template HTML dan kode sisi klien untuk menghapus pola yang tidak kompatibel dengan CSP</span></span></span>

<span style="box-sizing: border-box; vertical-align: inherit;"><span style="box-sizing: border-box; vertical-align: inherit;">Penangan kejadian sebaris (seperti </span></span>`onclick="…"`<span style="box-sizing: border-box; vertical-align: inherit;"><span style="box-sizing: border-box; vertical-align: inherit;">, </span></span>`onerror="…"`<span style="box-sizing: border-box; vertical-align: inherit;"><span style="box-sizing: border-box; vertical-align: inherit;">) dan JavaScript URI ( </span></span>`<a href="javascript:…">`<span style="box-sizing: border-box; vertical-align: inherit;"><span style="box-sizing: border-box; vertical-align: inherit;">) bisa digunakan untuk menjalankan skrip. </span><span style="box-sizing: border-box; vertical-align: inherit;">Ini berarti bahwa penyerang yang menemukan bug XSS dapat menginjeksi HTML jenis ini dan mengeksekusi JavaScript berbahaya. </span><span style="box-sizing: border-box; vertical-align: inherit;">CSP berbasis nonce atau hash melarang penggunaan markup tersebut. </span><span style="box-sizing: border-box; vertical-align: inherit;">Jika situs Anda menggunakan salah satu pola yang dijelaskan di atas, Anda harus mengubah pola tersebut menjadi alternatif yang lebih aman.</span></span>

<span style="box-sizing: border-box; vertical-align: inherit;"><span style="box-sizing: border-box; vertical-align: inherit;">Jika Anda mengaktifkan CSP di langkah sebelumnya, Anda akan dapat melihat pelanggaran CSP di konsol setiap kali CSP memblokir pola yang tidak kompatibel.</span></span>

![Laporan pelanggaran CSP di konsol pengembang Chrome. - idev.my.id](https://web-dev.imgix.net/image/vgdbNJBYHma2o62ZqYmcnkq3j0o1/mRWfNxAhQXzInOLCgtv8.jpg?auto=format)

<span style="box-sizing: border-box; vertical-align: inherit;"><span style="box-sizing: border-box; vertical-align: inherit;">Dalam kebanyakan kasus, perbaikannya langsung:</span></span>

#### <span style="box-sizing: border-box; vertical-align: inherit;"><span style="box-sizing: border-box; vertical-align: inherit;">Untuk memfaktor ulang penangan kejadian sebaris, tulis ulang untuk ditambahkan dari blok JavaScript</span></span>

<figure style="box-sizing: border-box; font-family: "Segoe UI", system-ui, -apple-system, sans-serif; font-size: 16px; line-height: 1.5em; margin: 0px 0px 32px; padding: 0px 0px 0px 16px; position: relative;"><span style="box-sizing: border-box; vertical-align: inherit;"><span style="box-sizing: border-box; vertical-align: inherit;">Diblokir oleh CSP</span></span>

<web-copy-code style="box-sizing: border-box; display: block; position: relative;"><button aria-label="Salin kode" style="-webkit-font-smoothing: antialiased; -webkit-tap-highlight-color: transparent; align-items: center; background-attachment: initial; background-clip: initial; background-image: initial; background-origin: initial; background-position: 0px 0px; background-repeat: initial; background-size: initial; border-color: initial; border-radius: 50%; border-style: initial; border-width: 0px; color: #202124; cursor: pointer; display: inline-flex; font-family: "Segoe UI", system-ui, -apple-system, sans-serif; font-size: 0.875rem; height: 48px; justify-content: center; letter-spacing: 1px; line-height: 2.25rem; margin: 8px; opacity: 0; outline: 0px; overflow: unset; padding: 0px; position: absolute; right: 0px; text-rendering: optimizespeed; text-transform: uppercase; transition: background 0.2s ease 0s, color 0.2s ease 0s; width: 48px;"><span role="tooltip" style="background: rgb(0, 0, 0); border-radius: 3px; box-sizing: border-box; color: white; font-size: 12px; font-stretch: normal; font-variant-east-asian: normal; font-variant-numeric: normal; left: 48px; letter-spacing: 0.3px; line-height: 1; opacity: 0; padding: 6px 8px; pointer-events: none; position: absolute; text-transform: none; top: calc(100% + 3px); transform-origin: right top; transform: translateX(-100%) scale(0.85); transition: opacity 75ms ease 0s, transform 0s ease 75ms, visibility 0s ease 75ms; visibility: hidden; white-space: nowrap; z-index: 1;"><span style="box-sizing: border-box; vertical-align: inherit;"><span style="box-sizing: border-box; vertical-align: inherit;"></span></span></span></button></web-copy-code>

```
<pre style="background: rgb(247, 247, 247); border-color: rgb(218, 220, 224); border-image: initial; border-style: solid; border-width: 1px 0px; box-sizing: border-box; color: #202124; font-family: SFMono-Regular, Consolas, "Liberation Mono", Menlo, monospace; font-size: 1rem; font-stretch: normal; font-variant-east-asian: normal; font-variant-numeric: normal; hyphens: none; line-height: 1.5em; margin-bottom: 0px; margin-top: 0px; min-height: 64px; overflow: auto; padding: 16px; tab-size: 2; word-spacing: normal;">```
<span style="box-sizing: border-box; color: #385d34;"><span style="box-sizing: border-box;"><span style="box-sizing: border-box; color: #183691;"><</span>span</span> <span style="box-sizing: border-box; color: #9f1c59;">onclick</span><span style="box-sizing: border-box; color: #183691;"><span style="box-sizing: border-box; color: #9f1c59;">=</span><span style="box-sizing: border-box;">"</span>doThings();<span style="box-sizing: border-box;">"</span></span><span style="box-sizing: border-box; color: #183691;">></span></span>A thing.<span style="box-sizing: border-box; color: #385d34;"><span style="box-sizing: border-box;"><span style="box-sizing: border-box; color: #183691;"></</span>span</span><span style="box-sizing: border-box; color: #183691;">></span></span>
```
```

<figcaption style="box-sizing: border-box;"><span style="box-sizing: border-box; vertical-align: inherit;"><span style="box-sizing: border-box; vertical-align: inherit;">CSP akan memblokir penangan kejadian sebaris.</span></span></figcaption>

</figure><figure style="box-sizing: border-box; font-family: "Segoe UI", system-ui, -apple-system, sans-serif; font-size: 16px; line-height: 1.5em; margin: 0px 0px 32px; padding: 0px 0px 0px 16px; position: relative;"><span style="box-sizing: border-box; vertical-align: inherit;"><span style="box-sizing: border-box; vertical-align: inherit;">Diizinkan oleh CSP</span></span>

<web-copy-code style="box-sizing: border-box; display: block; position: relative;"><button aria-label="Salin kode" style="-webkit-font-smoothing: antialiased; -webkit-tap-highlight-color: transparent; align-items: center; background-attachment: initial; background-clip: initial; background-image: initial; background-origin: initial; background-position: 0px 0px; background-repeat: initial; background-size: initial; border-color: initial; border-radius: 50%; border-style: initial; border-width: 0px; color: #202124; cursor: pointer; display: inline-flex; font-family: "Segoe UI", system-ui, -apple-system, sans-serif; font-size: 0.875rem; height: 48px; justify-content: center; letter-spacing: 1px; line-height: 2.25rem; margin: 8px; opacity: 0; outline: 0px; overflow: unset; padding: 0px; position: absolute; right: 0px; text-rendering: optimizespeed; text-transform: uppercase; transition: background 0.2s ease 0s, color 0.2s ease 0s; width: 48px;"><span role="tooltip" style="background: rgb(0, 0, 0); border-radius: 3px; box-sizing: border-box; color: white; font-size: 12px; font-stretch: normal; font-variant-east-asian: normal; font-variant-numeric: normal; left: 48px; letter-spacing: 0.3px; line-height: 1; opacity: 0; padding: 6px 8px; pointer-events: none; position: absolute; text-transform: none; top: calc(100% + 3px); transform-origin: right top; transform: translateX(-100%) scale(0.85); transition: opacity 75ms ease 0s, transform 0s ease 75ms, visibility 0s ease 75ms; visibility: hidden; white-space: nowrap; z-index: 1;"><span style="box-sizing: border-box; vertical-align: inherit;"><span style="box-sizing: border-box; vertical-align: inherit;"></span></span></span></button></web-copy-code>

```
<pre style="background: rgb(247, 247, 247); border-color: rgb(218, 220, 224); border-image: initial; border-style: solid; border-width: 1px 0px; box-sizing: border-box; color: #202124; font-family: SFMono-Regular, Consolas, "Liberation Mono", Menlo, monospace; font-size: 1rem; font-stretch: normal; font-variant-east-asian: normal; font-variant-numeric: normal; hyphens: none; line-height: 1.5em; margin-bottom: 0px; margin-top: 0px; min-height: 64px; overflow: auto; padding: 16px; tab-size: 2; word-spacing: normal;">```
<span style="box-sizing: border-box; color: #385d34;"><span style="box-sizing: border-box;"><span style="box-sizing: border-box; color: #183691;"><</span>span</span> <span style="box-sizing: border-box; color: #9f1c59;">id</span><span style="box-sizing: border-box; color: #183691;"><span style="box-sizing: border-box; color: #9f1c59;">=</span><span style="box-sizing: border-box;">"</span>things<span style="box-sizing: border-box;">"</span></span><span style="box-sizing: border-box; color: #183691;">></span></span>A thing.<span style="box-sizing: border-box; color: #385d34;"><span style="box-sizing: border-box;"><span style="box-sizing: border-box; color: #183691;"></</span>span</span><span style="box-sizing: border-box; color: #183691;">></span></span><br style="box-sizing: border-box;"></br><span style="box-sizing: border-box; color: #385d34;"><span style="box-sizing: border-box;"><span style="box-sizing: border-box; color: #183691;"><</span>script</span> <span style="box-sizing: border-box; color: #9f1c59;">nonce</span><span style="box-sizing: border-box; color: #183691;"><span style="box-sizing: border-box; color: #9f1c59;">=</span><span style="box-sizing: border-box;">"</span>${nonce}<span style="box-sizing: border-box;">"</span></span><span style="box-sizing: border-box; color: #183691;">></span></span><span style="box-sizing: border-box;"><span style="box-sizing: border-box;"><br style="box-sizing: border-box;"></br>  document<span style="box-sizing: border-box; color: #183691;">.</span><span style="box-sizing: border-box;">getElementById</span><span style="box-sizing: border-box; color: #183691;">(</span><span style="box-sizing: border-box; color: #183691;">'things'</span><span style="box-sizing: border-box; color: #183691;">)</span><br style="box-sizing: border-box;"></br>          <span style="box-sizing: border-box; color: #183691;">.</span><span style="box-sizing: border-box;">addEventListener</span><span style="box-sizing: border-box; color: #183691;">(</span><span style="box-sizing: border-box; color: #183691;">'click'</span><span style="box-sizing: border-box; color: #183691;">,</span> doThings<span style="box-sizing: border-box; color: #183691;">)</span><span style="box-sizing: border-box; color: #183691;">;</span><br style="box-sizing: border-box;"></br></span></span><span style="box-sizing: border-box; color: #385d34;"><span style="box-sizing: border-box;"><span style="box-sizing: border-box; color: #183691;"></</span>script</span><span style="box-sizing: border-box; color: #183691;">></span></span>
```
```

<figcaption style="box-sizing: border-box;"><span style="box-sizing: border-box; vertical-align: inherit;"><span style="box-sizing: border-box; vertical-align: inherit;">CSP akan mengizinkan penangan acara yang didaftarkan melalui JavaScript.</span></span></figcaption>

</figure>#### <span style="box-sizing: border-box; vertical-align: inherit;"><span style="box-sizing: border-box; vertical-align: inherit;">Untuk </span></span>`javascript:`<span style="box-sizing: border-box; vertical-align: inherit;"><span style="box-sizing: border-box; vertical-align: inherit;">URI, Anda dapat menggunakan pola yang serupa</span></span>

<figure style="box-sizing: border-box; font-family: "Segoe UI", system-ui, -apple-system, sans-serif; font-size: 16px; line-height: 1.5em; margin: 0px 0px 32px; padding: 0px 0px 0px 16px; position: relative;"><span style="box-sizing: border-box; vertical-align: inherit;"><span style="box-sizing: border-box; vertical-align: inherit;">Diblokir oleh CSP</span></span>

<web-copy-code style="box-sizing: border-box; display: block; position: relative;"><button aria-label="Salin kode" style="-webkit-font-smoothing: antialiased; -webkit-tap-highlight-color: transparent; align-items: center; background-attachment: initial; background-clip: initial; background-image: initial; background-origin: initial; background-position: 0px 0px; background-repeat: initial; background-size: initial; border-color: initial; border-radius: 50%; border-style: initial; border-width: 0px; color: #202124; cursor: pointer; display: inline-flex; font-family: "Segoe UI", system-ui, -apple-system, sans-serif; font-size: 0.875rem; height: 48px; justify-content: center; letter-spacing: 1px; line-height: 2.25rem; margin: 8px; opacity: 0; outline: 0px; overflow: unset; padding: 0px; position: absolute; right: 0px; text-rendering: optimizespeed; text-transform: uppercase; transition: background 0.2s ease 0s, color 0.2s ease 0s; width: 48px;"><span role="tooltip" style="background: rgb(0, 0, 0); border-radius: 3px; box-sizing: border-box; color: white; font-size: 12px; font-stretch: normal; font-variant-east-asian: normal; font-variant-numeric: normal; left: 48px; letter-spacing: 0.3px; line-height: 1; opacity: 0; padding: 6px 8px; pointer-events: none; position: absolute; text-transform: none; top: calc(100% + 3px); transform-origin: right top; transform: translateX(-100%) scale(0.85); transition: opacity 75ms ease 0s, transform 0s ease 75ms, visibility 0s ease 75ms; visibility: hidden; white-space: nowrap; z-index: 1;"><span style="box-sizing: border-box; vertical-align: inherit;"><span style="box-sizing: border-box; vertical-align: inherit;"></span></span></span></button></web-copy-code>

```
<pre style="background: rgb(247, 247, 247); border-color: rgb(218, 220, 224); border-image: initial; border-style: solid; border-width: 1px 0px; box-sizing: border-box; color: #202124; font-family: SFMono-Regular, Consolas, "Liberation Mono", Menlo, monospace; font-size: 1rem; font-stretch: normal; font-variant-east-asian: normal; font-variant-numeric: normal; hyphens: none; line-height: 1.5em; margin-bottom: 0px; margin-top: 0px; min-height: 64px; overflow: auto; padding: 16px; tab-size: 2; word-spacing: normal;">```
<span style="box-sizing: border-box; color: #385d34;"><span style="box-sizing: border-box;"><span style="box-sizing: border-box; color: #183691;"><</span>a</span> <span style="box-sizing: border-box; color: #9f1c59;">href</span><span style="box-sizing: border-box; color: #183691;"><span style="box-sizing: border-box; color: #9f1c59;">=</span><span style="box-sizing: border-box;">"</span>javascript:linkClicked()<span style="box-sizing: border-box;">"</span></span><span style="box-sizing: border-box; color: #183691;">></span></span>foo<span style="box-sizing: border-box; color: #385d34;"><span style="box-sizing: border-box;"><span style="box-sizing: border-box; color: #183691;"></</span>a</span><span style="box-sizing: border-box; color: #183691;">></span></span>
```
```

<figcaption style="box-sizing: border-box;"><span style="box-sizing: border-box; vertical-align: inherit;"><span style="box-sizing: border-box; vertical-align: inherit;">CSP akan memblokir javascript: URI.</span></span></figcaption>

</figure><figure style="box-sizing: border-box; font-family: "Segoe UI", system-ui, -apple-system, sans-serif; font-size: 16px; line-height: 1.5em; margin: 0px 0px 32px; padding: 0px 0px 0px 16px; position: relative;"><span style="box-sizing: border-box; vertical-align: inherit;"><span style="box-sizing: border-box; vertical-align: inherit;">Diizinkan oleh CSP</span></span>

<web-copy-code style="box-sizing: border-box; display: block; position: relative;"><button aria-label="Salin kode" style="-webkit-font-smoothing: antialiased; -webkit-tap-highlight-color: transparent; align-items: center; background-attachment: initial; background-clip: initial; background-image: initial; background-origin: initial; background-position: 0px 0px; background-repeat: initial; background-size: initial; border-color: initial; border-radius: 50%; border-style: initial; border-width: 0px; color: #202124; cursor: pointer; display: inline-flex; font-family: "Segoe UI", system-ui, -apple-system, sans-serif; font-size: 0.875rem; height: 48px; justify-content: center; letter-spacing: 1px; line-height: 2.25rem; margin: 8px; opacity: 0; outline: 0px; overflow: unset; padding: 0px; position: absolute; right: 0px; text-rendering: optimizespeed; text-transform: uppercase; transition: background 0.2s ease 0s, color 0.2s ease 0s; width: 48px;"><span role="tooltip" style="background: rgb(0, 0, 0); border-radius: 3px; box-sizing: border-box; color: white; font-size: 12px; font-stretch: normal; font-variant-east-asian: normal; font-variant-numeric: normal; left: 48px; letter-spacing: 0.3px; line-height: 1; opacity: 0; padding: 6px 8px; pointer-events: none; position: absolute; text-transform: none; top: calc(100% + 3px); transform-origin: right top; transform: translateX(-100%) scale(0.85); transition: opacity 75ms ease 0s, transform 0s ease 75ms, visibility 0s ease 75ms; visibility: hidden; white-space: nowrap; z-index: 1;"><span style="box-sizing: border-box; vertical-align: inherit;"><span style="box-sizing: border-box; vertical-align: inherit;"></span></span></span></button></web-copy-code>

```
<pre style="background: rgb(247, 247, 247); border-color: rgb(218, 220, 224); border-image: initial; border-style: solid; border-width: 1px 0px; box-sizing: border-box; color: #202124; font-family: SFMono-Regular, Consolas, "Liberation Mono", Menlo, monospace; font-size: 1rem; font-stretch: normal; font-variant-east-asian: normal; font-variant-numeric: normal; hyphens: none; line-height: 1.5em; margin-bottom: 0px; margin-top: 0px; min-height: 64px; overflow: auto; padding: 16px; tab-size: 2; word-spacing: normal;">```
<span style="box-sizing: border-box; color: #385d34;"><span style="box-sizing: border-box;"><span style="box-sizing: border-box; color: #183691;"><</span>a</span> <span style="box-sizing: border-box; color: #9f1c59;">id</span><span style="box-sizing: border-box; color: #183691;"><span style="box-sizing: border-box; color: #9f1c59;">=</span><span style="box-sizing: border-box;">"</span>foo<span style="box-sizing: border-box;">"</span></span><span style="box-sizing: border-box; color: #183691;">></span></span>foo<span style="box-sizing: border-box; color: #385d34;"><span style="box-sizing: border-box;"><span style="box-sizing: border-box; color: #183691;"></</span>a</span><span style="box-sizing: border-box; color: #183691;">></span></span><br style="box-sizing: border-box;"></br><span style="box-sizing: border-box; color: #385d34;"><span style="box-sizing: border-box;"><span style="box-sizing: border-box; color: #183691;"><</span>script</span> <span style="box-sizing: border-box; color: #9f1c59;">nonce</span><span style="box-sizing: border-box; color: #183691;"><span style="box-sizing: border-box; color: #9f1c59;">=</span><span style="box-sizing: border-box;">"</span>${nonce}<span style="box-sizing: border-box;">"</span></span><span style="box-sizing: border-box; color: #183691;">></span></span><span style="box-sizing: border-box;"><span style="box-sizing: border-box;"><br style="box-sizing: border-box;"></br>  document<span style="box-sizing: border-box; color: #183691;">.</span><span style="box-sizing: border-box;">getElementById</span><span style="box-sizing: border-box; color: #183691;">(</span><span style="box-sizing: border-box; color: #183691;">'foo'</span><span style="box-sizing: border-box; color: #183691;">)</span><br style="box-sizing: border-box;"></br>          <span style="box-sizing: border-box; color: #183691;">.</span><span style="box-sizing: border-box;">addEventListener</span><span style="box-sizing: border-box; color: #183691;">(</span><span style="box-sizing: border-box; color: #183691;">'click'</span><span style="box-sizing: border-box; color: #183691;">,</span> linkClicked<span style="box-sizing: border-box; color: #183691;">)</span><span style="box-sizing: border-box; color: #183691;">;</span><br style="box-sizing: border-box;"></br></span></span><span style="box-sizing: border-box; color: #385d34;"><span style="box-sizing: border-box;"><span style="box-sizing: border-box; color: #183691;"></</span>script</span><span style="box-sizing: border-box; color: #183691;">></span></span>
```
```

<figcaption style="box-sizing: border-box;"><span style="box-sizing: border-box; vertical-align: inherit;"><span style="box-sizing: border-box; vertical-align: inherit;">CSP akan mengizinkan penangan acara yang didaftarkan melalui JavaScript.</span></span></figcaption>

</figure>#### <span style="box-sizing: border-box; vertical-align: inherit;"><span style="box-sizing: border-box; vertical-align: inherit;">Penggunaan </span></span>`eval()`<span style="box-sizing: border-box; vertical-align: inherit;"><span style="box-sizing: border-box; vertical-align: inherit;">di JavaScript</span></span>

<span style="box-sizing: border-box; vertical-align: inherit;"><span style="box-sizing: border-box; vertical-align: inherit;">Jika aplikasi Anda menggunakan </span></span>`eval()`<span style="box-sizing: border-box; vertical-align: inherit;"><span style="box-sizing: border-box; vertical-align: inherit;">untuk mengonversi serialisasi string JSON menjadi objek JS, Anda harus memfaktor ulang instance tersebut menjadi </span></span>`JSON.parse()`<span style="box-sizing: border-box; vertical-align: inherit;"><span style="box-sizing: border-box; vertical-align: inherit;">, yang juga </span></span>[<span style="box-sizing: border-box; vertical-align: inherit;"><span style="box-sizing: border-box; vertical-align: inherit;">lebih cepat</span></span>](https://v8.dev/blog/cost-of-javascript-2019#json)<span style="box-sizing: border-box; vertical-align: inherit;"><span style="box-sizing: border-box; vertical-align: inherit;"> .</span></span>

<span style="box-sizing: border-box; vertical-align: inherit;"><span style="box-sizing: border-box; vertical-align: inherit;">Jika Anda tidak dapat menghapus semua penggunaan </span></span>`eval()`<span style="box-sizing: border-box; vertical-align: inherit;"><span style="box-sizing: border-box; vertical-align: inherit;">, Anda masih dapat menetapkan CSP berbasis nonce yang ketat, tetapi Anda harus menggunakan </span></span>`'unsafe-eval'`<span style="box-sizing: border-box; vertical-align: inherit;"><span style="box-sizing: border-box; vertical-align: inherit;">kata kunci CSP yang akan membuat kebijakan Anda sedikit kurang aman.</span></span>

<span style="box-sizing: border-box; vertical-align: inherit;"><span style="box-sizing: border-box; vertical-align: inherit;">Anda dapat menemukan ini dan lebih banyak contoh pemfaktoran ulang semacam itu di Codelab CSP yang ketat ini: <https://glitch.com/edit/#!/strict-csp-codelab></span></span>

### <span style="box-sizing: border-box; vertical-align: inherit;"><span style="box-sizing: border-box; vertical-align: inherit;">Langkah 4<span style="font-weight: 500;">: Tambahkan fallback untuk mendukung Safari dan browser lama</span></span></span>

<span style="box-sizing: border-box; vertical-align: inherit;"><span style="box-sizing: border-box; vertical-align: inherit;">CSP didukung oleh semua browser utama, tetapi Anda memerlukan dua fallback:</span></span>

- <span style="box-sizing: border-box; vertical-align: inherit;"><span style="box-sizing: border-box; vertical-align: inherit;">Penggunaan </span></span>`'strict-dynamic'`<span style="box-sizing: border-box; vertical-align: inherit;"><span style="box-sizing: border-box; vertical-align: inherit;">memerlukan penambahan </span></span>`https:`<span style="box-sizing: border-box; vertical-align: inherit;"><span style="box-sizing: border-box; vertical-align: inherit;">sebagai cadangan untuk Safari, satu-satunya browser utama yang tidak mendukung </span></span>`'strict-dynamic'`<span style="box-sizing: border-box; vertical-align: inherit;"><span style="box-sizing: border-box; vertical-align: inherit;">. </span><span style="box-sizing: border-box; vertical-align: inherit;">Dengan melakukan itu:</span></span>
    
    
    - <span style="box-sizing: border-box; vertical-align: inherit;"><span style="box-sizing: border-box; vertical-align: inherit;">Semua browser yang mendukung </span></span>`'strict-dynamic'`<span style="box-sizing: border-box; vertical-align: inherit;"><span style="box-sizing: border-box; vertical-align: inherit;">akan mengabaikan </span></span>`https:`<span style="box-sizing: border-box; vertical-align: inherit;"><span style="box-sizing: border-box; vertical-align: inherit;">fallback, jadi ini tidak akan mengurangi kekuatan kebijakan.</span></span>
    - <span style="box-sizing: border-box; vertical-align: inherit;"><span style="box-sizing: border-box; vertical-align: inherit;">Di Safari, skrip yang bersumber dari luar akan diizinkan untuk dimuat hanya jika berasal dari HTTPS. </span><span style="box-sizing: border-box; vertical-align: inherit;">Ini kurang aman daripada CSP ketat – ini adalah fallback – tetapi masih akan mencegah penyebab XSS umum tertentu seperti injeksi </span></span>`javascript:`<span style="box-sizing: border-box; vertical-align: inherit;"><span style="box-sizing: border-box; vertical-align: inherit;">URI karena </span></span>`'unsafe-inline'`<span style="box-sizing: border-box; vertical-align: inherit;"><span style="box-sizing: border-box; vertical-align: inherit;">tidak ada atau diabaikan jika ada hash atau nonce.</span></span>
- <span style="box-sizing: border-box; vertical-align: inherit;"><span style="box-sizing: border-box; vertical-align: inherit;">Untuk memastikan kompatibilitas dengan versi browser yang sangat lama (4+ tahun), Anda dapat menambahkan </span></span>`'unsafe-inline'`<span style="box-sizing: border-box; vertical-align: inherit;"><span style="box-sizing: border-box; vertical-align: inherit;">sebagai fallback. </span><span style="box-sizing: border-box; vertical-align: inherit;">Semua browser terbaru akan mengabaikan </span></span>`'unsafe-inline'`<span style="box-sizing: border-box; vertical-align: inherit;"><span style="box-sizing: border-box; vertical-align: inherit;">jika ada nonce atau hash CSP.</span></span>

<div>### <span style="box-sizing: border-box; vertical-align: inherit;"><span style="box-sizing: border-box; vertical-align: inherit;">Langkah 5<span style="font-weight: 500;">: Terapkan CSP Anda</span></span></span>

<span style="box-sizing: border-box; vertical-align: inherit;"><span style="box-sizing: border-box; vertical-align: inherit;">Setelah mengonfirmasi bahwa tidak ada skrip sah yang diblokir oleh CSP di lingkungan pengembangan lokal, Anda dapat melanjutkan dengan menerapkan CSP ke lingkungan produksi (pementasan, lalu) Anda:</span></span>

1. <span style="box-sizing: border-box; vertical-align: inherit;"><span style="box-sizing: border-box; vertical-align: inherit;">(Opsional) Terapkan CSP Anda dalam mode hanya laporan menggunakan </span></span>`Content-Security-Policy-Report-Only`<span style="box-sizing: border-box; vertical-align: inherit;"><span style="box-sizing: border-box; vertical-align: inherit;">header. </span><span style="box-sizing: border-box; vertical-align: inherit;">Pelajari lebih lanjut tentang </span></span>[<span style="box-sizing: border-box; vertical-align: inherit;"><span style="box-sizing: border-box; vertical-align: inherit;">API Pelaporan</span></span>](https://developers.google.com/web/updates/2018/09/reportingapi)<span style="box-sizing: border-box; vertical-align: inherit;"><span style="box-sizing: border-box; vertical-align: inherit;"> . </span><span style="box-sizing: border-box; vertical-align: inherit;">Mode hanya laporan berguna untuk menguji perubahan yang berpotensi merusak seperti CSP baru dalam produksi, sebelum benar-benar menerapkan pembatasan CSP. </span><span style="box-sizing: border-box; vertical-align: inherit;">Dalam mode hanya laporan, CSP Anda tidak memengaruhi perilaku aplikasi Anda (tidak ada yang benar-benar rusak). </span><span style="box-sizing: border-box; vertical-align: inherit;">Namun browser masih akan menghasilkan kesalahan konsol dan laporan pelanggaran ketika pola yang tidak kompatibel dengan CSP ditemukan (sehingga Anda dapat melihat apa yang mungkin rusak untuk pengguna akhir Anda).</span></span>
2. <span style="box-sizing: border-box; vertical-align: inherit;"><span style="box-sizing: border-box; vertical-align: inherit;">Setelah Anda yakin bahwa CSP Anda tidak akan menyebabkan kerusakan bagi pengguna akhir Anda, terapkan CSP Anda menggunakan </span></span>`Content-Security-Policy`<span style="box-sizing: border-box; vertical-align: inherit;"><span style="box-sizing: border-box; vertical-align: inherit;">header respons. </span></span><span style="box-sizing: border-box;"><span style="box-sizing: border-box; vertical-align: inherit;"><span style="box-sizing: border-box; vertical-align: inherit;">Hanya setelah Anda menyelesaikan langkah ini, CSP akan mulai melindungi aplikasi Anda dari XSS</span></span></span><span style="box-sizing: border-box; vertical-align: inherit;"><span style="box-sizing: border-box; vertical-align: inherit;"> . </span><span style="box-sizing: border-box; vertical-align: inherit;">Menyetel CSP Anda melalui sisi server header HTTP lebih aman daripada menyetelnya sebagai </span></span>`<meta>`<span style="box-sizing: border-box; vertical-align: inherit;"><span style="box-sizing: border-box; vertical-align: inherit;">tag; </span><span style="box-sizing: border-box; vertical-align: inherit;">gunakan tajuk jika Anda bisa.</span></span>

</div></div>> <div><span face=""Segoe UI", system-ui, -apple-system, sans-serif" style="box-sizing: border-box; font-size: 18px; font-weight: 700;"><span style="box-sizing: border-box; vertical-align: inherit;"><span style="box-sizing: border-box; color: #444444; vertical-align: inherit;">Gotchas!</span></span></span></div><div><span style="color: #444444;"><span style="box-sizing: border-box; vertical-align: inherit;"><span style="box-sizing: border-box; vertical-align: inherit;">Pastikan CSP yang Anda gunakan “ketat” dengan memeriksanya di </span></span>[<span style="box-sizing: border-box; vertical-align: inherit;"><span style="box-sizing: border-box; vertical-align: inherit;">CSP Service Checker</span></span>](https://csp-evaluator.withgoogle.com/)<span style="box-sizing: border-box; vertical-align: inherit;"><span style="box-sizing: border-box; vertical-align: inherit;"> atau Lighthouse. </span><span style="box-sizing: border-box; vertical-align: inherit;">Ini sangat penting, karena bahkan perubahan kecil pada suatu kebijakan dapat secara signifikan mengurangi keamanannya.</span></span></span>
> 
> </div>

## <span style="box-sizing: border-box; vertical-align: inherit;"><span style="box-sizing: border-box; vertical-align: inherit;">Batasan</span></span>

<span style="box-sizing: border-box; vertical-align: inherit;"><span style="box-sizing: border-box; vertical-align: inherit;">Secara umum, CSP yang ketat memberikan lapisan keamanan tambahan yang kuat yang membantu mengurangi XSS. </span><span style="box-sizing: border-box; vertical-align: inherit;">Dalam kebanyakan kasus, CSP mengurangi permukaan serangan secara signifikan (pola berbahaya seperti </span></span>`javascript:`<span style="box-sizing: border-box; vertical-align: inherit;"><span style="box-sizing: border-box; vertical-align: inherit;">URI benar-benar dimatikan). </span><span style="box-sizing: border-box; vertical-align: inherit;">Namun, berdasarkan jenis CSP yang Anda gunakan (nonce, hashes, dengan atau tanpa </span></span>`'strict-dynamic'`<span style="box-sizing: border-box; vertical-align: inherit;"><span style="box-sizing: border-box; vertical-align: inherit;">), ada kasus di mana CSP tidak melindungi:</span></span>

- <span style="box-sizing: border-box; vertical-align: inherit;"><span style="box-sizing: border-box; vertical-align: inherit;">Jika Anda nonce skrip, tetapi ada injeksi langsung ke dalam tubuh atau ke </span></span>`src`<span style="box-sizing: border-box; vertical-align: inherit;"><span style="box-sizing: border-box; vertical-align: inherit;">parameter </span></span>`<script>`<span style="box-sizing: border-box; vertical-align: inherit;"><span style="box-sizing: border-box; vertical-align: inherit;">elemen itu.</span></span>
- <span style="box-sizing: border-box; vertical-align: inherit;"><span style="box-sizing: border-box; vertical-align: inherit;">Jika ada suntikan ke lokasi skrip yang dibuat secara dinamis ( </span></span>`document.createElement('script')`<span style="box-sizing: border-box; vertical-align: inherit;"><span style="box-sizing: border-box; vertical-align: inherit;">), termasuk ke dalam fungsi pustaka apa pun yang membuat </span></span>`script`<span style="box-sizing: border-box; vertical-align: inherit;"><span style="box-sizing: border-box; vertical-align: inherit;">simpul DOM berdasarkan nilai argumennya. </span><span style="box-sizing: border-box; vertical-align: inherit;">Ini termasuk beberapa API umum seperti jQuery </span></span>`.html()`<span style="box-sizing: border-box; vertical-align: inherit;"><span style="box-sizing: border-box; vertical-align: inherit;">, serta </span></span>`.get()`<span style="box-sizing: border-box; vertical-align: inherit;"><span style="box-sizing: border-box; vertical-align: inherit;">dan </span></span>`.post()`<span style="box-sizing: border-box; vertical-align: inherit;"><span style="box-sizing: border-box; vertical-align: inherit;">di jQuery &lt;3.0.</span></span>
- <span style="box-sizing: border-box; vertical-align: inherit;"><span style="box-sizing: border-box; vertical-align: inherit;">Jika ada suntikan template di aplikasi AngularJS lama. </span><span style="box-sizing: border-box; vertical-align: inherit;">Penyerang yang dapat memasukkan template AngularJS dapat menggunakannya untuk </span></span>[<span style="box-sizing: border-box; vertical-align: inherit;"><span style="box-sizing: border-box; vertical-align: inherit;">mengeksekusi JavaScript sewenang-wenang</span></span>](https://sites.google.com/site/bughunteruniversity/nonvuln/angularjs-expression-sandbox-bypass)<span style="box-sizing: border-box; vertical-align: inherit;"><span style="box-sizing: border-box; vertical-align: inherit;"> .</span></span>
- <span style="box-sizing: border-box; vertical-align: inherit;"><span style="box-sizing: border-box; vertical-align: inherit;">Jika kebijakan berisi </span></span>`'unsafe-eval'`<span style="box-sizing: border-box; vertical-align: inherit;"><span style="box-sizing: border-box; vertical-align: inherit;">, injeksi ke </span></span>`eval()`<span style="box-sizing: border-box; vertical-align: inherit;"><span style="box-sizing: border-box; vertical-align: inherit;">, </span></span>`setTimeout()`<span style="box-sizing: border-box; vertical-align: inherit;"><span style="box-sizing: border-box; vertical-align: inherit;">dan beberapa API lain yang jarang digunakan.</span></span>

<span style="box-sizing: border-box; vertical-align: inherit;"><span style="box-sizing: border-box; vertical-align: inherit;">Pengembang dan teknisi keamanan harus memberikan perhatian khusus pada pola tersebut selama tinjauan kode dan audit keamanan. </span><span style="box-sizing: border-box; vertical-align: inherit;">Anda dapat menemukan detail selengkapnya tentang kasus yang dijelaskan di atas dalam </span></span>[<span style="box-sizing: border-box; vertical-align: inherit;"><span style="box-sizing: border-box; vertical-align: inherit;">presentasi CSP ini</span></span>](https://static.sched.com/hosted_files/locomocosec2019/db/CSP%20-%20A%20Successful%20Mess%20Between%20Hardening%20and%20Mitigation%20%281%29.pdf#page=27)<span style="box-sizing: border-box; vertical-align: inherit;"><span style="box-sizing: border-box; vertical-align: inherit;"> .</span></span>

<span style="box-sizing: border-box; vertical-align: inherit;"><span style="box-sizing: border-box; vertical-align: inherit;">Baca juga artikel sebelumnya: [Cara Mengatasi Akun Iklan Yang Dinonaktifkan Di Facebook.](https://www.idev.my.id/2021/03/cara-mengatasi-akun-iklan-yang.html)</span></span>

</div><div>https://www.idev.my.id/feeds/posts/default</div>